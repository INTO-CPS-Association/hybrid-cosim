<!DOCTYPE html>
<html>
<body>

This documentation is limited to a description of the source code distribution.

<h1>Source code distribution</h1>

<p>Source code is provided in directory "sources". Except for a c file containing the C main function, the files listed below needs to be compiled as separate compilation units. The remaining c files distributed are included from those in one way or another. Some header files from Sundials are located in sub directories, e.g. "cvode" to match the original Sundials code structure. This is necessary since some #include statements rely on this structure.

<p>
The files below are sufficent to create a DLL or shared object file. For a complete executable, also a main program is needed of course.
</p>

<p>
cvode.c <br/>
cvode_dense.c <br/>
cvode_direct.c <br/>
cvode_io.c <br/>
dsmodel.c <br/>
fmiCommonFunctions_int.c <br/>
fmiCoSimFunctions_int.c <br/>
fmiFunctions.c <br/>
fmiMEFunctions_int.c <br/>
integration.c <br/>
jac.c <br/>
nvector_serial.c <br/>
sundials_dense.c <br/>
sundials_direct.c <br/>
sundials_math.c <br/>
sundials_nvector.c <br/>
util.c
</p>

<p>
If you set the MODEL_IDENTIFIER (FMI 1) or FMI2_FUNCTION_PREFIX (FMI 2) explicitly in your source code, e.g.:

<pre>
#define FMI2_FUNCTION_PREFIX MyModel_
#include "fmiFunctions.h"
</pre>

you must also update fmiModelIdentifier.h accordingly.
</p>

<p>
If your target platform does not have a file system you have to define NO_FILE in conf.h:
<pre>
#define NO_FILE
</pre>
</p>


<h2>Handling multiple FMUs</h2>
In order to be able to combine several source code FMUs, the internal functions and symbols need to be static. This in turn requires that
the whole source code is compiled in a single compilation unit. To facilitate this, an extra source code file

<pre>all.c</pre>

is provided, that includes all other C files. The only disadvantage of compiling this instead, is that any modification in the source code
requires re-compilation of everything.

</body>
</html>
